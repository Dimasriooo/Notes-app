<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes App</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
 
        body {
            background-color: #f5f5f5;
        }
 
        .container {
            max-width: 1000px;
            margin: auto;
            padding: 16px;
        }
 
        .notes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 24px;
        }
 
        button {
            background-color: #2196F3;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background 0.3s ease;
        }
 
        button:hover {
            background-color: #0d8bf0;
        }
    </style>
</head>
<body>
    <app-bar></app-bar>
    <div class="container">
        <note-input></note-input>
        <h2 style="margin-top: 24px; margin-bottom: 12px;">Daftar Catatan</h2>
        <div class="notes-grid" id="notesContainer"></div>
    </div>
 
    <script>
        // Data dummy yang harus ditampilkan
        const notesData = [
            {
                id: 'notes-jT-jjsyz61J8XKiI',
                title: 'Welcome to Notes, Dimas!',
                body: 'Welcome to Notes! This is your first note. You can archive it, delete it, or create new ones.',
                createdAt: '2022-07-28T10:03:12.594Z',
                archived: false,
            },
            {
                id: 'notes-aB-cdefg12345',
                title: 'Meeting Agenda',
                body: 'Discuss project updates and assign tasks for the upcoming week.',
                createdAt: '2022-08-05T15:30:00.000Z',
                archived: false,
            },
            {
                id: 'notes-XyZ-789012345',
                title: 'Shopping List',
                body: 'Milk, eggs, bread, fruits, and vegetables.',
                createdAt: '2022-08-10T08:45:23.120Z',
                archived: false,
            },
            {
                id: 'notes-1a-2b3c4d5e6f',
                title: 'Personal Goals',
                body: 'Read two books per month, exercise three times a week, learn a new language.',
                createdAt: '2022-08-15T18:12:55.789Z',
                archived: false,
            },
            {
                id: 'notes-LMN-456789',
                title: 'Recipe: Spaghetti Bolognese',
                body: 'Ingredients: ground beef, tomatoes, onions, garlic, pasta. Steps:...',
                createdAt: '2022-08-20T12:30:40.200Z',
                archived: false,
            },
            {
                id: 'notes-QwErTyUiOp',
                title: 'Workout Routine',
                body: 'Monday: Cardio, Tuesday: Upper body, Wednesday: Rest, Thursday: Lower body, Friday: Cardio.',
                createdAt: '2022-08-25T09:15:17.890Z',
                archived: false,
            },
            {
                id: 'notes-abcdef-987654',
                title: 'Book Recommendations',
                body: "1. 'The Alchemist' by Paulo Coelho\n2. '1984' by George Orwell\n3. 'To Kill a Mockingbird' by Harper Lee",
                createdAt: '2022-09-01T14:20:05.321Z',
                archived: false,
            },
            {
                id: 'notes-zyxwv-54321',
                title: 'Daily Reflections',
                body: 'Write down three positive things that happened today and one thing to improve tomorrow.',
                createdAt: '2022-09-07T20:40:30.150Z',
                archived: false,
            },
            {
                id: 'notes-poiuyt-987654',
                title: 'Travel Bucket List',
                body: '1. Paris, France\n2. Kyoto, Japan\n3. Santorini, Greece\n4. New York City, USA',
                createdAt: '2022-09-15T11:55:44.678Z',
                archived: false,
            },
            {
                id: 'notes-asdfgh-123456',
                title: 'Coding Projects',
                body: '1. Build a personal website\n2. Create a mobile app\n3. Contribute to an open-source project',
                createdAt: '2022-09-20T17:10:12.987Z',
                archived: false,
            },
            {
                id: 'notes-5678-abcd-efgh',
                title: 'Project Deadline',
                body: 'Complete project tasks by the deadline on October 1st.',
                createdAt: '2022-09-28T14:00:00.000Z',
                archived: false,
            },
            {
                id: 'notes-9876-wxyz-1234',
                title: 'Health Checkup',
                body: 'Schedule a routine health checkup with the doctor.',
                createdAt: '2022-10-05T09:30:45.600Z',
                archived: false,
            },
            {
                id: 'notes-qwerty-8765-4321',
                title: 'Financial Goals',
                body: '1. Create a monthly budget\n2. Save 20% of income\n3. Invest in a retirement fund.',
                createdAt: '2022-10-12T12:15:30.890Z',
                archived: false,
            },
            {
                id: 'notes-98765-54321-12345',
                title: 'Holiday Plans',
                body: 'Research and plan for the upcoming holiday destination.',
                createdAt: '2022-10-20T16:45:00.000Z',
                archived: false,
            },
            {
                id: 'notes-1234-abcd-5678',
                title: 'Language Learning',
                body: 'Practice Spanish vocabulary for 30 minutes every day.',
                createdAt: '2022-10-28T08:00:20.120Z',
                archived: false,
            }
        ];
        
        // Ambil data dari localStorage atau gunakan data dummy jika belum ada data tersimpan
        let notes = JSON.parse(localStorage.getItem('notes')) || notesData;
 
        // Simpan data ke localStorage
        function saveNotes() {
            localStorage.setItem('notes', JSON.stringify(notes));
        }
 
        // Komponen App Bar
        class AppBar extends HTMLElement {
            connectedCallback() {
                this.innerHTML = `<div style="background:#2196F3; color:white; padding:16px; text-align:center; font-size:20px; font-weight:bold;">Notes App</div>`;
            }
        }
 
        // Komponen Form Input
        class NoteInput extends HTMLElement {
            connectedCallback() {
                this.innerHTML = `
                    <div style="background:white; padding:16px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1); margin-bottom:24px;">
                        <form id="noteForm">
                            <div style="margin-bottom:12px;">
                                <label style="display:block; margin-bottom:5px;">Judul</label>
                                <input type="text" id="title" required placeholder="Masukkan judul catatan..." style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px;">
                            </div>
                            <div style="margin-bottom:12px;">
                                <label style="display:block; margin-bottom:5px;">Isi Catatan</label>
                                <textarea id="body" required placeholder="Tuliskan isi catatan Anda..." style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; min-height:100px;"></textarea>
                            </div>
                            <button type="submit" style="margin-top:8px;">Simpan</button>
                        </form>
                    </div>
                `;
 
                this.querySelector('#noteForm').addEventListener('submit', (event) => {
                    event.preventDefault();
                    const title = this.querySelector('#title').value;
                    const body = this.querySelector('#body').value;
 
                    const newId = 'notes-' + Date.now().toString();
                    const newNote = { 
                        id: newId, 
                        title, 
                        body, 
                        createdAt: new Date().toISOString(),
                        archived: false 
                    };
                    
                    notes.push(newNote);
                    saveNotes();
                    renderNotes();
                    event.target.reset();
                });
            }
        }
 
        // Komponen Catatan
        class NoteItem extends HTMLElement {
            static get observedAttributes() {
                return ['title', 'body', 'created-at', 'note-id'];
            }
 
            connectedCallback() {
                this.render();
            }
 
            attributeChangedCallback() {
                this.render();
            }
 
            render() {
                const title = this.getAttribute('title');
                const body = this.getAttribute('body');
                const createdAt = this.getAttribute('created-at');
                const noteId = this.getAttribute('note-id');
                
                // Mengubah tampilan body dengan mengganti \n dengan <br> untuk tampilan yang lebih baik
                const formattedBody = body ? body.replace(/\n/g, '<br>') : '';
 
                this.innerHTML = `
                    <div style="background:white; padding:16px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1);">
                        <div style="font-size:18px; font-weight:bold; color:#2196F3;">${title || ''}</div>
                        <div style="font-size:12px; color:#777; margin-bottom:8px;">${createdAt ? new Date(createdAt).toLocaleDateString('id-ID') : ''}</div>
                        <div style="font-size:14px; margin-bottom:12px;">${formattedBody}</div>
                        <button class="delete-btn" data-id="${noteId}" style="background:red; margin-top:10px;">Hapus</button>
                    </div>
                `;
 
                const deleteBtn = this.querySelector('.delete-btn');
                if (deleteBtn) {
                    deleteBtn.addEventListener('click', () => {
                        deleteNote(noteId);
                    });
                }
            }
        }
 
        // Fungsi Menghapus Catatan
        function deleteNote(noteId) {
            const index = notes.findIndex(note => note.id === noteId);
            if (index !== -1) {
                notes.splice(index, 1);
                saveNotes();
                renderNotes();
            }
        }
 
        // Fungsi Render Catatan
        function renderNotes() {
            const notesContainer = document.getElementById('notesContainer');
            if (!notesContainer) {
                console.error('Element dengan id "notesContainer" tidak ditemukan');
                return;
            }
            
            notesContainer.innerHTML = '';
            
            // Hanya tampilkan catatan yang tidak diarsipkan
            const activeNotes = notes.filter(note => !note.archived);
 
            if (activeNotes.length === 0) {
                notesContainer.innerHTML = '<p style="grid-column: 1/-1; text-align: center; padding: 20px;">Tidak ada catatan</p>';
                return;
            }
 
            activeNotes.forEach(note => {
                if (note && note.title && note.body && note.createdAt && note.id) {
                    const noteElement = document.createElement('note-item');
                    noteElement.setAttribute('title', note.title);
                    noteElement.setAttribute('body', note.body);
                    noteElement.setAttribute('created-at', note.createdAt);
                    noteElement.setAttribute('note-id', note.id);
                    notesContainer.appendChild(noteElement);
                }
            });
        }
 
        // Daftarkan Komponen
        customElements.define('app-bar', AppBar);
        customElements.define('note-input', NoteInput);
        customElements.define('note-item', NoteItem);
 
        // Reset localStorage untuk memastikan data dummy ditampilkan 
        localStorage.removeItem('notes');
 
        // Panggil renderNotes saat dokumen dimuat
        document.addEventListener('DOMContentLoaded', () => {
            // Pastikan data dummy akan ditampilkan
            if (!localStorage.getItem('notes')) {
                saveNotes();
            }
            renderNotes();
            
            // Menambahkan log untuk debugging
            console.log("Jumlah catatan yang ditampilkan:", notes.length);
        });
    </script>
</body>
</html>